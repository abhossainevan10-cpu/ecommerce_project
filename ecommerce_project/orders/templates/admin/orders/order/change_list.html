{% extends "admin/change_list.html" %}
{% load static %}

{% block result_list %}
    <div style="background: #f1f5f9; padding: 20px; border-radius: 12px; margin-bottom: 25px; font-family: 'Segoe UI', Tahoma, sans-serif;">
        
        <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 20px; flex-wrap: wrap;">
            <span style="font-weight: bold; color: #475569;">Filter:</span>
            
            <a href="?days=all" style="background: #3b82f6; color: white; border: none; padding: 5px 15px; border-radius: 5px; text-decoration: none; font-size: 13px;">All Time</a>
            <a href="?days=7" style="background: white; border: 1px solid #cbd5e1; padding: 5px 15px; border-radius: 5px; color: #475569; text-decoration: none; font-size: 13px;">7 Days</a>
            <a href="?days=30" style="background: white; border: 1px solid #cbd5e1; padding: 5px 15px; border-radius: 5px; color: #475569; text-decoration: none; font-size: 13px;">30 Days</a>
            <a href="?days=90" style="background: white; border: 1px solid #cbd5e1; padding: 5px 15px; border-radius: 5px; color: #475569; text-decoration: none; font-size: 13px;">90 Days</a>

            <form method="get" style="display: flex; gap: 8px; align-items: center; margin: 0;">
                <input type="date" name="start_date" style="padding: 4px; border: 1px solid #cbd5e1; border-radius: 4px;"> 
                <span style="color: #475569;">to</span> 
                <input type="date" name="end_date" style="padding: 4px; border: 1px solid #cbd5e1; border-radius: 4px;">
                <button type="submit" style="background: #6366f1; color: white; border: none; padding: 6px 15px; border-radius: 5px; cursor: pointer;">Apply</button>
            </form>

            <a href="?" style="background: #f97316; color: white; border: none; padding: 6px 15px; border-radius: 5px; text-decoration: none; font-size: 13px;">Clear</a>
        </div>

        <div style="display: flex; gap: 20px; margin-bottom: 25px;">
            <div style="flex: 1; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); text-align: center; border-bottom: 4px solid #0ea5a4;">
                <p style="color: #64748b; margin: 0; font-size: 13px; font-weight: bold; text-transform: uppercase;">Total Revenue</p>
                <h2 style="margin: 10px 0; color: #1e293b; font-size: 28px; font-weight: 800;">Tk {{ total_revenue }}</h2>
                <small style="color: #0ea5a4;">Income from Sales</small>
            </div>
            
            <div style="flex: 1; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); text-align: center; border-bottom: 4px solid #6366f1;">
                <p style="color: #64748b; margin: 0; font-size: 13px; font-weight: bold; text-transform: uppercase;">Cash Flow</p>
                <h2 style="margin: 10px 0; color: #1e293b; font-size: 28px; font-weight: 800;">Tk {{ total_revenue }}</h2>
                <small style="color: #6366f1;">Net change in period</small>
            </div>
        </div>

        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.05);">
            <h4 style="margin-top: 0; color: #1e293b; font-weight: bold;">Revenue Trend</h4>
            <div style="height: 300px;">
                <canvas id="revenueChart"></canvas>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const chartData = JSON.parse('{{ chart_data|safe }}');
            const ctx = document.getElementById('revenueChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: chartData.labels,
                    datasets: [{
                        label: 'Revenue',
                        data: chartData.values,
                        borderColor: '#0ea5a4',
                        backgroundColor: 'rgba(14, 165, 164, 0.1)',
                        fill: true,
                        tension: 0.4,
                        borderWidth: 3,
                        pointRadius: 5,
                        pointBackgroundColor: '#0ea5a4'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { beginAtZero: true, ticks: { color: '#64748b' } },
                        x: { ticks: { color: '#64748b' } }
                    }
                }
            });
        });
    </script>

    {{ block.super }}
{% endblock %}